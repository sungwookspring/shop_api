# XtoOne 무한루프
* 연관관계된 객체를 참조하고, 그 참조된 결과에서 또 연관관계를 참조하므로 무한 루프 반복
```java
@GetMapping("/api/v1/simple-orders")
public List<Order> ordersV1(){
    List<Order> all = orderRepository.findAllByString(new OrderSearch());
    return all;
}
```

![](../imgs/주문조회1.png)

## 무한루프 이유
* 양방향 연관관계가 LAZY
* Jackson Hibernate 라이브러리를 사용해서 LAZY는 null로 초기화
* gradle 설정
    ```java
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-hibernate5'
    ```
* 애플리케이션 설정
    ```java
    @SpringBootApplication
    public class ShoppingMallApplication {
    
    	public static void main(String[] args) {
    		SpringApplication.run(ShoppingMallApplication.class, args);
    	}
    
    	@Bean
    	Hibernate5Module hibernate5Modul(){
    		return new Hibernate5Module();
    	}
    }
    ```
 * 양방향 연관관계 중 하나를 선택하여 @JsonIgnore적용
    ```java
   @Entity
   @Getter @Setter
   public class Member {
   ...
       @JsonIgnore
       @OneToMany(mappedBy = "member")
       private List<Order> orders = new ArrayList<>();
   }
   ```
   
 * 실행 결과: LAZY부분이 null
 
 ![](../imgs/주문조회2.png)